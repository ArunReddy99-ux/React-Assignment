import{j as r}from"./jsx-runtime-e7d94ccb.js";import{r as y,R as M}from"./index-981f9478.js";import{c as j}from"./clsx-0839fdbe.js";function b({data:s,columns:l,loading:x=!1,selectable:n=!1,onRowSelect:f,rowKey:h,className:_}){const[o,B]=y.useState(null),[i,w]=y.useState(new Set),S=y.useMemo(()=>{if(!o)return s;const e=l.find(t=>t.key===o.columnKey);return e?[...s].sort((t,$)=>{const c=t[e.dataIndex],d=$[e.dataIndex];return c==null&&d==null?0:c==null?-1:d==null?1:c<d?o.direction==="asc"?-1:1:c>d?o.direction==="asc"?1:-1:0}):s},[s,o,l]),L=e=>{e.sortable&&B(a=>!a||a.columnKey!==e.key?{columnKey:e.key,direction:"asc"}:{columnKey:e.key,direction:a.direction==="asc"?"desc":"asc"})},z=n&&i.size===s.length&&s.length>0,P=()=>{n&&w(e=>e.size===s.length?new Set:new Set(s.map((a,t)=>t)))},V=e=>{n&&w(a=>{const t=new Set(a);return t.has(e)?t.delete(e):t.add(e),t})};return M.useEffect(()=>{f&&f(Array.from(i).map(e=>s[e]))},[i,f,s]),r.jsx("div",{className:j("w-full overflow-x-auto",_),children:r.jsxs("table",{className:"min-w-full border border-gray-200 dark:border-gray-700 rounded-md",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:r.jsxs("tr",{children:[n&&r.jsx("th",{scope:"col",className:"p-2 text-left w-10",children:r.jsx("input",{"aria-label":"Select all rows",type:"checkbox",checked:z,onChange:P})}),l.map(e=>r.jsx("th",{scope:"col",className:"p-2 text-left text-sm font-semibold text-gray-700 dark:text-gray-200",children:r.jsxs("button",{type:"button",onClick:()=>L(e),className:j("flex items-center gap-1",e.sortable?"cursor-pointer":"cursor-default"),"aria-label":e.sortable?`Sort by ${e.title}`:void 0,children:[e.title,(o==null?void 0:o.columnKey)===e.key&&r.jsx("span",{"aria-hidden":!0,children:o.direction==="asc"?"▲":"▼"})]})},e.key))]})}),r.jsx("tbody",{children:x?r.jsx("tr",{children:r.jsx("td",{colSpan:(n?1:0)+l.length,className:"p-6 text-center text-sm text-gray-500",children:"Loading..."})}):S.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:(n?1:0)+l.length,className:"p-6 text-center text-sm text-gray-500",children:"No data available"})}):S.map((e,a)=>r.jsxs("tr",{className:"odd:bg-white even:bg-gray-50 dark:odd:bg-gray-900 dark:even:bg-gray-800",children:[n&&r.jsx("td",{className:"p-2",children:r.jsx("input",{"aria-label":`Select row ${a+1}`,type:"checkbox",checked:i.has(a),onChange:()=>V(a)})}),l.map(t=>r.jsx("td",{className:"p-2 text-sm text-gray-800 dark:text-gray-100 border-t border-gray-100 dark:border-gray-700",children:String(e[t.dataIndex])},t.key))]},String(h?h(e,a):a)))})]})})}b.__docgenInfo={description:"DataTable displays tabular data with optional sorting and row selection.",methods:[],displayName:"DataTable",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:""},columns:{required:!0,tsType:{name:"Array",elements:[{name:"Column",elements:[{name:"T"}],raw:"Column<T>"}],raw:"Column<T>[]"},description:""},loading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},selectable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onRowSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(selectedRows: T[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"T"}],raw:"T[]"},name:"selectedRows"}],return:{name:"void"}}},description:""},rowKey:{required:!1,tsType:{name:"signature",type:"function",raw:"(row: T, index: number) => string | number",signature:{arguments:[{type:{name:"T"},name:"row"},{type:{name:"number"},name:"index"}],return:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};const O=[{key:"name",title:"Name",dataIndex:"name",sortable:!0},{key:"age",title:"Age",dataIndex:"age",sortable:!0},{key:"email",title:"Email",dataIndex:"email"}],J={title:"Components/DataTable",component:b,args:{data:[{id:1,name:"Alice",age:24,email:"alice@example.com"},{id:2,name:"Bob",age:29,email:"bob@example.com"},{id:3,name:"Charlie",age:31,email:"charlie@example.com"}],columns:O}},m={},u={args:{loading:!0}},p={args:{data:[]}},g={render:s=>{const[l,x]=y.useState([]);return r.jsxs("div",{className:"space-y-2",children:[r.jsx(b,{...s,selectable:!0,onRowSelect:x}),r.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-200",children:["Selected: ",l.map(n=>n.name).join(", ")||"None"]})]})}};var k,T,N;m.parameters={...m.parameters,docs:{...(k=m.parameters)==null?void 0:k.docs,source:{originalSource:"{}",...(N=(T=m.parameters)==null?void 0:T.docs)==null?void 0:N.source}}};var v,R,C;u.parameters={...u.parameters,docs:{...(v=u.parameters)==null?void 0:v.docs,source:{originalSource:`{
  args: {
    loading: true
  }
}`,...(C=(R=u.parameters)==null?void 0:R.docs)==null?void 0:C.source}}};var q,A,E;p.parameters={...p.parameters,docs:{...(q=p.parameters)==null?void 0:q.docs,source:{originalSource:`{
  args: {
    data: []
  }
}`,...(E=(A=p.parameters)==null?void 0:A.docs)==null?void 0:E.source}}};var I,D,K;g.parameters={...g.parameters,docs:{...(I=g.parameters)==null?void 0:I.docs,source:{originalSource:`{
  render: args => {
    const [rows, setRows] = useState<Person[]>([]);
    return <div className="space-y-2">\r
                <DataTable<Person> {...args} selectable onRowSelect={setRows} />\r
                <div className="text-sm text-gray-600 dark:text-gray-200">Selected: {rows.map(r => r.name).join(', ') || 'None'}</div>\r
            </div>;
  }
}`,...(K=(D=g.parameters)==null?void 0:D.docs)==null?void 0:K.source}}};const Q=["Basic","Loading","Empty","Selectable"];export{m as Basic,p as Empty,u as Loading,g as Selectable,Q as __namedExportsOrder,J as default};
